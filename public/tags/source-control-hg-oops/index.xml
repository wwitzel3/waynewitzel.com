<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>Source Control Hg Oops on occasional posts about technology </title>
      <generator uri="https://gohugo.io">Hugo</generator>
    <link>http://localhost:1313/tags/source-control-hg-oops/index.xml</link>
    <language>en-us</language>
    
    
    <updated>Mon, 01 Jan 0001 00:00:00 UTC</updated>
    
    <item>
      <title>I didn&#39;t want those changes anyway.</title>
      <link>http://localhost:1313/scm-hg-mistake/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
      
      <guid>http://localhost:1313/scm-hg-mistake/</guid>
      <description>

&lt;p&gt;I use hg (&lt;a href=&#34;http://www.selenic.com/mercurial/wiki/&#34;&gt;Mercurial&lt;/a&gt;) for version control. Since switching to hg I have adopted the following process. I also do this for my Git projects at work.
&lt;ul&gt;
    &lt;li&gt;I create a local branch to working.&lt;/li&gt;
    &lt;li&gt;I setup my External Tools in Eclipse to run my test suite.&lt;/li&gt;
    &lt;li&gt;The output of my test suite gets committed to my local branch.&lt;/li&gt;
    &lt;li&gt;I squash the local branch messages when I merge in to master.&lt;/li&gt;
    &lt;li&gt;I add some insightful commit message for my master commit. Like, I haz changes.&lt;/li&gt;
&lt;/ul&gt;
So yesterday, I roll up my sleeves and prepare to dive in to an older project that &lt;a href=&#34;http://en.wikipedia.org/wiki/Code_smell&#34;&gt;smells like rotten potatoes&lt;/a&gt;. The plan of attack is to take this project and bring it up-to-date with Python 2.6, Pylons 0.9.7, and SQLalchemy 0.5.2 in the process of doing it, re-factor and extend where needed, of course letting the tests drive. I start my work and wand waving and 2-3 hours in I&amp;rsquo;ve removed about 200 lines of cruft and copy paste inheritance extended flexibility by further encapsulating some behavior using the Strategy pattern. I&amp;rsquo;ve got 47 tests (including functional doctests) passing and I&amp;rsquo;m green bar and happy with my time spent. So now time to merge this baby back in to master.&lt;/p&gt;

&lt;p&gt;My test suite external tool performs the hg add . and I keep my .hgignore pretty up-to-date for Python projects, so I feel confident doing that. I open up the terminal to check out the change sets and start the merge and I notice I missed a binary format in my .hgignore. So I now have about 15 unwanted files staged for adding. Being lazy and knowing my last commit was when I just ran my test suite, I blindly run.&lt;/p&gt;

&lt;p&gt;[sourcecode lang=&amp;ldquo;bash&amp;rdquo;]
$ ^R hg revert &lt;enter&gt; &lt;enter&gt; (Ctrl-R, hg revert - shell previous command search)
$ hg revert -a &amp;ndash;no-backup&lt;/p&gt;

&lt;h1 id=&#34;toc_0&#34;&gt;&amp;hellip;my work being destroyed because I was lazy and not paying attention&lt;/h1&gt;

&lt;h1 id=&#34;toc_1&#34;&gt;whimpering&lt;/h1&gt;

&lt;p&gt;[/sourcecode]&lt;/p&gt;

&lt;p&gt;It is at this point my day goes from great to awful. I face palm as I watch the uncommitted changes I&amp;rsquo;ve been making over the last 3 hours get reverted. As I mentioned, this project was older, in fact, it was started before the migration to hg and I never updated the External Tools runnable for this project in Eclipse to do the new hg add / commits. So every time I thought I was committing when I was running the tests, I was in fact not. Fortunate for me, I did have some buffers open and was able to recover the end result in about 45 minutes of hacking, but I did lose all of my change history which was very very disappointing (not to mention scary).&lt;/p&gt;

&lt;p&gt;So if I had any advice after this it would be ensure your older projects are up-to-date with how you do things now and they follow your current development process before you start refactoring. I guess the oneliner could be; When refactoring a project start with the tool set first.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>